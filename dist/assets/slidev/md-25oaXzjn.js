const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/slidev/CodeRunner-QmClOdjo.js","assets/modules/unplugin-icons-D1hvqpAP.js","assets/modules/vue-DHi3ot2U.js","assets/monaco/bundled-types-CpkQVRP8.js","assets/modules/file-saver-igGfcqei.js","assets/monaco/bundled-types-BcFG8S89.css","assets/slidev/context-CFopLDfk.js","assets/index-DTUbufRV.js","assets/modules/shiki-CJwp1GBl.js","assets/modules/shiki-BPvBenZD.css","assets/index-5VhsKzP9.css","assets/slidev/IconButton.vue_vue_type_script_setup_true_lang-DUeJBwLW.js","assets/CodeRunner-YBfxSSx9.css"])))=>i.map(i=>d[i]);
import{_ as b,q}from"../monaco/bundled-types-CpkQVRP8.js";import{d as G,t as d,z as D,aI as F,S as J,n as E,o as z,b as X,e as i,h as Z,c as I,I as f,g as ee,W as te,k as oe,l as S,m as N,q as ne,s as ae,aa as h}from"../modules/vue-DHi3ot2U.js";import{l as k}from"../lz-string-7V7f_eN4.js";import{a as ie,Y as $}from"../index-DTUbufRV.js";import{u as W,f as re}from"./context-CFopLDfk.js";import{I as se}from"./default-PBBEjl57.js";import"../modules/file-saver-igGfcqei.js";import"../modules/shiki-CJwp1GBl.js";const le={class:"relative slidev-monaco-container"},de=G({__name:"Monaco",props:{codeLz:{default:""},diffLz:{},lang:{default:"typescript"},readonly:{type:Boolean,default:!1},lineNumbers:{default:"off"},height:{default:"initial"},editorOptions:{},ata:{type:Boolean,default:!0},runnable:{type:Boolean,default:!1},writable:{},autorun:{type:[Boolean,String],default:!0},showOutputAt:{type:[null,Boolean,String,Number,Array]},outputHeight:{},highlightOutput:{type:Boolean,default:!0},runnerOptions:{}},setup(B){const e=B,w=te(()=>b(()=>import("./CodeRunner-QmClOdjo.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12])).then(l=>l.default)),r=d(k.decompressFromBase64(e.codeLz).trimEnd()),v=e.diffLz&&d(k.decompressFromBase64(e.diffLz).trimEnd()),L=D(()=>e.writable&&!e.readonly&&!1),u={ts:"typescript",js:"javascript"}[e.lang]??e.lang,A={typescript:"mts",javascript:"mjs",ts:"mts",js:"mjs"}[e.lang]??e.lang,m=d(),_=d(),C=d(0),s=d(),Q=D(()=>e.height==="auto"?`${C.value}px`:e.height==="initial"?`${s.value}px`:e.height),O=d(),{$page:R,$renderContext:T}=W(),{currentSlideNo:j}=ie(),P=F(()=>Math.abs(R.value-j.value)<=1&&O.value,l=>{["slide","presenter"].includes(T.value)?l():setTimeout(l,5e3)});return J(async()=>{const{default:l}=await b(async()=>{const{default:t}=await import("../monaco/bundled-types-CpkQVRP8.js").then(a=>a.x);return{default:t}},__vite__mapDeps([3,2,4,5])),{ata:c,monaco:o,editorOptions:U}=await l(),p=o.editor.createModel(r.value,u,o.Uri.parse(`file:///${$()}.${A}`));p.onDidChangeContent(()=>r.value=p.getValue());const M={automaticLayout:!0,readOnly:e.readonly,lineNumbers:e.lineNumbers,minimap:{enabled:!1},overviewRulerBorder:!1,overviewRulerLanes:0,padding:{top:10,bottom:10},lineNumbersMinChars:3,bracketPairColorization:{enabled:!1},tabSize:2,fontSize:11.5,fontFamily:"var(--slidev-code-font-family)",scrollBeyondLastLine:!1,...U,...e.editorOptions};let n;if(v){const t=o.editor.createModel(v.value,u,o.Uri.parse(`file:///${$()}.${A}`));t.onDidChangeContent(()=>r.value=p.getValue());const a=o.editor.createDiffEditor(_.value,{renderOverviewRuler:!1,...M});a.setModel({original:p,modified:t});const g=a.getOriginalEditor(),y=a.getModifiedEditor(),x=()=>{const V=Math.max(g.getContentHeight(),y.getContentHeight())+4;s.value??(s.value=V),C.value=V,E(()=>a.layout())};g.onDidContentSizeChange(x),y.onDidContentSizeChange(x),n=y}else{const t=o.editor.create(_.value,{model:p,lineDecorationsWidth:0,...M});t.onDidContentSizeChange(a=>{const g=a.contentHeight+4;s.value??(s.value=g),C.value=g,E(()=>n.layout())}),n=t}O.value=()=>{P(),b(()=>import("../monaco/bundled-types-CpkQVRP8.js").then(t=>t.y),__vite__mapDeps([3,2,4,5])),e.ata&&(c(n.getValue()),n.onDidChangeModelContent(q(1e3,()=>{c(n.getValue())})))};const Y=n.layoutContentWidget.bind(n);n.layoutContentWidget=t=>{Y(t),t.getId()==="editor.contrib.resizableContentHoverWidget"&&(t._resizableNode.domNode.style.transform=t._positionPreference===1?"translateY(calc(100% * (var(--slidev-slide-scale) - 1)))":"")},n.addAction({id:"slidev-save",label:"Save",keybindings:[o.KeyMod.CtrlCmd|o.KeyCode.KeyS],run:()=>{L.value,console.warn("[Slidev] this monaco editor is not writable, save action is ignored.")}}),E(()=>o.editor.remeasureFonts())}),(l,c)=>(z(),X("div",le,[i("div",{ref_key:"outer",ref:m,class:"relative slidev-monaco-container-inner",style:Z({height:Q.value})},[i("div",{ref_key:"container",ref:_,class:"absolute inset-0.5"},null,512)],4),e.runnable?(z(),I(f(w),{key:0,modelValue:r.value,"onUpdate:modelValue":c[0]||(c[0]=o=>r.value=o),lang:f(u),autorun:e.autorun,"show-output-at":e.showOutputAt,height:e.outputHeight,"highlight-output":e.highlightOutput,"runner-options":e.runnerOptions},null,8,["modelValue","lang","autorun","show-output-at","height","highlight-output","runner-options"])):ee("v-if",!0)]))}}),ue=i("h1",null,"Monaco Editor",-1),ce=i("p",null,"Slidev provides built-in Monaco Editor support.",-1),pe=i("p",null,[h("Add "),i("code",null,"{monaco}"),h(" to the code block to turn it into an editor:")],-1),ge=i("p",null,[h("Use "),i("code",null,"{monaco-run}"),h(" to create an editor that can execute the code directly in the slide:")],-1),me={__name:"slides.md__slidev_25",setup(B){const{$slidev:e,$nav:w,$clicksContext:r,$clicks:v,$page:L,$renderContext:H,$frontmatter:u}=W();return r.setup(),(K,A)=>{const m=de;return z(),I(se,ne(ae(f(re)(f(u),24))),{default:oe(()=>[ue,ce,pe,S(m,N({"code-lz":"JYWwDg9gTgLgBAbzlApgMzgXzmqERwBEAbgK4qEDcAUKJLInCuDAJ4CCUUAhq1jngKEAdAHoUADxgooAO24AbKtWoBjCLIDO8blzgBeZOgAUzMG049WxgIwAGAJQOaQA",lang:"ts"},{}),null,16),ge,S(m,N({runnable:"","code-lz":"JYWwDg9gTgLgBAbzgNwKZQM7AgOzgXzgDMoIQ4AiZAV1QoG4AoUSWROVcGATwEEooAQ24AaOBmEAJVABsZEAsVLkKAOgD0qAB4x0OQTIaNGE7tLkQAFAEomAY1wYIM1KvkBzSwAMaqOABIENExsHHwvW0YHHCcXNwhPRjgOLj4BYQAeHGoQACN0AD5LAEYABmtVKFQAE2o7VEsk5LhLImBc6zgAXgK4AG1VQbbcsWHVQRhLAFpi6wBCOABqYnbxyamAJnmAXREm5L7isWLtputGSKA==",lang:"ts"},{}),null,16)]),_:1},16)}}},Ee=me;export{Ee as default};
